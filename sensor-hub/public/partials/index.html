<div class="container">
    <div ng-if="!serverLinkOK()">
        <div class="row">
            <div class="alert alert-danger" role="alert">
                <span>
                    <h3>
                        Server link down ! <span am-time-ago="lastUpdate"></span>
                    </h3>
                    <button type="button" class="btn btn-default" ng-click="refresh()">
                        <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
                    </button>
                </span>
            </div>
        </div>
    </div>

    <div ng-repeat="r in records">
        <div class="col-md-4">
            <div class="panel" ng-class="r.header" style="margin: 6px">
                <div class="panel-heading">
                    <h3 class="panel-title">Sensor {{r.pin_num}}</h3>
                </div>
                <div class="panel-body">
                    <!-- <p>
                        Last data point <span am-time-ago="history[r.pin_num].labels[history[r.pin_num].labels.length - 1]"></span>
                    </p> -->
                    <div ng-if="data_history">
                        <linechart data="data_history" options="r.options"></linechart>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix" ng-if="$index%3==2"></div>
    </div>
</div>
